<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login</title>
<link rel="icon" href="images/favicon.png?v=2" />
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
<link rel="stylesheet" href="./style.css">

</head>

<body>

	<div class="banner">
		<div class="logo-container">
			<img src="images/Logo_BG_Removed.png" alt="Company Logo" class="logo" />
			<img src="images/Name_BG_Removed_Crop.png" alt="Company Name"
				class="bank-name" />
		</div>

		<div class="banner-buttons">
			<button class="banner-button" onclick="">
				<span class="material-symbols-outlined"> identity_platform </span>
			</button>
		</div>
	</div>

	<div class="inner-body">
		<div class="out-box">
			<div class="box">
				<div class="login">
					<form id="login-form" class="loginBx">
						<h2>
							<i class="fa-solid fa-right-to-bracket"></i> Login
						</h2>
						<input type="text" id="email" placeholder="Email" required /> <input
							type="password" id="password" placeholder="Password" required />
						<input type="submit" value="Sign in" />
						<div class="group">
							<a href="#">Forgot Password</a> <a href="#">Sign up</a>
						</div>
					</form>
				</div>
			</div>
		</div>
		<img src="images/Login_Image.png" alt="Login_Image"
			class="login-image" />
	</div>

	<dialog id="login-dialog">
	<h3>Login Status</h3>
	<p id="dialog-message"></p>
	<button onclick="document.getElementById('login-dialog').close()">Close</button>
	</dialog>

	<footer class="footer">
		<span class="material-symbols-outlined">copyright</span>
		<p>2025 MRN Bank Services. All Rights Reserved.</p>
	</footer>

	<script>
document.getElementById("login-form").addEventListener("submit", async function (e) {
    e.preventDefault();

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;

    const payload = {
        email: email,
        password: password
    };

    try {
        const response = await fetch("http://localhost:8080/MRN_BANKING/MRNBank/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(payload)
        });

        const dialog = document.getElementById("login-dialog");
        const messageBox = document.getElementById("dialog-message");

        if (response.ok) {
            const result = await response.json();
            messageBox.innerHTML = `
                ✅ <strong>${result.message}</strong><br>
                User ID: ${result.userId}<br>
                User Category: ${result.userCategory}
            `;
            dialog.showModal();
            setTimeout(() => dialog.close(), 10000); 
        } else {
            const error = await response.json();
            messageBox.innerHTML = `❌ <strong>Login Failed:</strong> ${error.message || "Invalid credentials."}`;
            dialog.showModal();
        }
    } catch (error) {
        const dialog = document.getElementById("login-dialog");
        const messageBox = document.getElementById("dialog-message");
        messageBox.innerHTML = `❌ <strong>Network Error:</strong> Unable to reach the server.`;
        dialog.showModal();
    }
});
</script>


</body>


</html>

